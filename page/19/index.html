<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>ASK&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="记录一些平时点滴">
<meta property="og:type" content="website">
<meta property="og:title" content="ASK&#39;s Blog">
<meta property="og:url" content="https://ansike.github.io/blog/page/19/index.html">
<meta property="og:site_name" content="ASK&#39;s Blog">
<meta property="og:description" content="记录一些平时点滴">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="ask">
<meta property="article:tag" content="ask">
<meta property="article:tag" content=" ansike">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/blog/atom.xml" title="ASK&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/blog/icon/icon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/blog/css/style.css">

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">ASK&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog/">首页</a>
        
          <a class="main-nav-link" href="/blog/archives">归档</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-box-wrap">
        <div class="search-box">
  <div class="search-form">
    <input class="search-box-input" id="searchIpt" placeholder="Search" />
    <button type="submit" class="search-box-submit">&#xF002;</button>
  </div>
  <div class="search-result-box"></div>
</div>
 
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-编程/shell/一键优化系统脚本" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E4%B8%80%E9%94%AE%E4%BC%98%E5%8C%96%E7%B3%BB%E7%BB%9F%E8%84%9A%E6%9C%AC/" class="article-date">
  <time datetime="2021-05-05T14:46:13.000Z" itemprop="datePublished">2021-05-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/programming/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E4%B8%80%E9%94%AE%E4%BC%98%E5%8C%96%E7%B3%BB%E7%BB%9F%E8%84%9A%E6%9C%AC/">一键优化系统脚本</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>系统版本: CentOS Linux release 8.3.2011<br>使用<code>/etc/init.d/rsyncd {start|stop|restart}</code>启动,停止,重启</p>
<h5 id="优化项"><a href="#优化项" class="headerlink" title="优化项"></a>优化项</h5><ol>
<li>配置国内yum源</li>
<li>关闭SELinux</li>
<li>关闭iptables</li>
</ol>
<h5 id="主干脚本"><a href="#主干脚本" class="headerlink" title="主干脚本"></a>主干脚本</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 更换镜像源</span></span><br><span class="line">function change_mirrors()&#123;</span><br><span class="line">  mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup &amp;&amp; \</span><br><span class="line">  wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-8.repo</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 关闭SELinux</span></span><br><span class="line">function close_selinux()&#123;</span><br><span class="line">  sed -i 's/SELINUX=enforcing/SELINUX=disabled/' /etc/selinux/config</span><br><span class="line">  grep SELINUX=disabled /etc/selinux/config</span><br><span class="line">  setenforce 0</span><br><span class="line">  getenforce</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 关闭iptables</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置中文字符集</span></span><br><span class="line">function set_lang()&#123;</span><br><span class="line"><span class="meta">  #</span><span class="bash"> 查看当前字符集</span></span><br><span class="line">  locale</span><br><span class="line"><span class="meta">  #</span><span class="bash"> 查看是否有中文字符集</span></span><br><span class="line">  locale -a | grep CN</span><br><span class="line"><span class="meta">  #</span><span class="bash"> 安装中文字符集</span></span><br><span class="line">  yum install -y langpacks-zh_CN</span><br><span class="line">  echo LANG=zh_CN.utf8 &gt; /etc/locale.conf</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 同步系统时间,ntp已经无法使用,使用chrony</span></span><br><span class="line">yum -y install chrony</span><br></pre></td></tr></table></figure>

<h5 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看centos版本</span></span><br><span class="line">cat /etc/redhat-release</span><br></pre></td></tr></table></figure>
<h5 id="什么是SELinux-安全增强型linux-https-zhuanlan-zhihu-com-p-30483108"><a href="#什么是SELinux-安全增强型linux-https-zhuanlan-zhihu-com-p-30483108" class="headerlink" title="什么是SELinux[安全增强型linux] https://zhuanlan.zhihu.com/p/30483108"></a>什么是SELinux[安全增强型linux] <a href="https://zhuanlan.zhihu.com/p/30483108" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/30483108</a></h5><p>是一个linux内核模块,也是linux的一个安全子系统<br>作用:最大限度的减少系统中服务进程可访问的资源(控制对象是进程,常规控制对象是用户)</p>
<h5 id="什么是iptables-https-www-zsythink-net-archives-1199"><a href="#什么是iptables-https-www-zsythink-net-archives-1199" class="headerlink" title="什么是iptables https://www.zsythink.net/archives/1199"></a>什么是iptables <a href="https://www.zsythink.net/archives/1199" target="_blank" rel="noopener">https://www.zsythink.net/archives/1199</a></h5><p>简单理解就是防火墙</p>
<h5 id="什么是UTC-GMT-https-www-zhihu-com-question-27052407"><a href="#什么是UTC-GMT-https-www-zhihu-com-question-27052407" class="headerlink" title="什么是UTC,GMT https://www.zhihu.com/question/27052407"></a>什么是UTC,GMT <a href="https://www.zhihu.com/question/27052407" target="_blank" rel="noopener">https://www.zhihu.com/question/27052407</a></h5><p>UTC(Coordinated Universal Time)协调世界时,来自地球自传<br>GMT(Greenwich Mean Time)格林尼治标准时间,来自原子钟</p>
<h5 id="linux系统时间和硬件时钟问题-date和hwclock-https-blog-csdn-net-wangshuminjava-article-details-79308130"><a href="#linux系统时间和硬件时钟问题-date和hwclock-https-blog-csdn-net-wangshuminjava-article-details-79308130" class="headerlink" title="linux系统时间和硬件时钟问题(date和hwclock) https://blog.csdn.net/wangshuminjava/article/details/79308130"></a>linux系统时间和硬件时钟问题(date和hwclock) <a href="https://blog.csdn.net/wangshuminjava/article/details/79308130" target="_blank" rel="noopener">https://blog.csdn.net/wangshuminjava/article/details/79308130</a></h5><p>系统关闭时会同步系统时间到硬件时钟，系统启动时会从硬件时钟读取时间更新到系统，这2个步骤都要根据 /etc/sysconfig/clock 文件中UTC的参数来设置时区转换</p>
<h6 id="etc-init-d-mysqld"><a href="#etc-init-d-mysqld" class="headerlink" title="/etc/init.d/mysqld"></a>/etc/init.d/mysqld</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">. /etc/init.d/functions</span><br><span class="line">function usage()&#123;</span><br><span class="line">  echo "USAGE:$0 &#123;start|stop|restart&#125;"</span><br><span class="line">  exit 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[ $# -ne 1 ] &amp;&amp; &#123;</span><br><span class="line">  usage</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[ "$1" = "start" ] &amp;&amp; &#123;</span><br><span class="line">  systemctl start  mysqld.service</span><br><span class="line">  action "started" /bin/true</span><br><span class="line">  exit 0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[ "$1" = "stop" ] &amp;&amp; &#123;</span><br><span class="line">  systemctl stop mysqld.service</span><br><span class="line">  action "stop" /bin/true</span><br><span class="line">  exit 0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[ "$1" = "restart" ] &amp;&amp; &#123;</span><br><span class="line">  systemctl restart mysqld.service</span><br><span class="line">  action "restart" /bin/true</span><br><span class="line">  exit 0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">usage</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://ansike.github.io/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E4%B8%80%E9%94%AE%E4%BC%98%E5%8C%96%E7%B3%BB%E7%BB%9F%E8%84%9A%E6%9C%AC/" data-id="clzmdspfq006zzwl10lryhpff" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/shell/" rel="tag">shell</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-编程/shell/判断字符串长度为0" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E5%88%A4%E6%96%AD%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%95%BF%E5%BA%A6%E4%B8%BA0/" class="article-date">
  <time datetime="2021-05-05T14:46:13.000Z" itemprop="datePublished">2021-05-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/programming/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E5%88%A4%E6%96%AD%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%95%BF%E5%BA%A6%E4%B8%BA0/">判断字符串长度为0</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="n-和-z-判断"><a href="#n-和-z-判断" class="headerlink" title="-n 和 -z 判断"></a>-n 和 -z 判断</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> -z:zero, -n:nozero</span></span><br><span class="line">var1="11"</span><br><span class="line">var2=""</span><br><span class="line">[ -z "$var1" ] &amp;&amp; echo 1 || echo 2 # 2</span><br><span class="line">[ -z "$var2" ] &amp;&amp; echo 1 || echo 2 # 1</span><br><span class="line">[ -n "$var1" ] &amp;&amp; echo 1 || echo 2 # 1</span><br><span class="line">[ -n "$var2" ] &amp;&amp; echo 1 || echo 2 # 2</span><br></pre></td></tr></table></figure>

<h5 id="变量字符串的方式"><a href="#变量字符串的方式" class="headerlink" title="变量字符串的方式"></a>变量字符串的方式</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var1="11"</span><br><span class="line">var2=""</span><br><span class="line">[ "$&#123;#var1&#125;" -eq 0 ] &amp;&amp; echo 1 || echo 2 # 2</span><br><span class="line">[ "$&#123;#var2&#125;" -eq 0 ] &amp;&amp; echo 1 || echo 2 # 1</span><br></pre></td></tr></table></figure>

<h5 id="通过expr的length计算"><a href="#通过expr的length计算" class="headerlink" title="通过expr的length计算"></a>通过<code>expr</code>的<code>length</code>计算</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var1="11"</span><br><span class="line">var2=""</span><br><span class="line">[ `expr length "$&#123;var1&#125;"` -eq 0 ] &amp;&amp; echo 1 || echo 2 # 2</span><br><span class="line">[ `expr length "$&#123;var2&#125;"` -eq 0 ] &amp;&amp; echo 1 || echo 2 # 1</span><br></pre></td></tr></table></figure>

<h5 id="通过wc-L"><a href="#通过wc-L" class="headerlink" title="通过wc -L"></a>通过<code>wc -L</code></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var1="11"</span><br><span class="line">var2=""</span><br><span class="line"><span class="meta">#</span><span class="bash"> -L 查最大行数</span></span><br><span class="line">[ `echo $&#123;var1&#125; | wc -L` -eq 0 ] &amp;&amp; echo 1 || echo 2 # 2</span><br><span class="line">[ `echo $&#123;var2&#125; | wc -L` -eq 0 ] &amp;&amp; echo 1 || echo 2 # 1</span><br><span class="line"><span class="meta">#</span><span class="bash"> -w 查看单词数量</span></span><br><span class="line">[ `echo $&#123;var1&#125; | wc -w` -eq 0 ] &amp;&amp; echo 1 || echo 2 # 2</span><br><span class="line">[ `echo $&#123;var2&#125; | wc -w` -eq 0 ] &amp;&amp; echo 1 || echo 2 # 1</span><br></pre></td></tr></table></figure>

<h5 id="通过awk-length"><a href="#通过awk-length" class="headerlink" title="通过awk length"></a>通过<code>awk length</code></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var1="11"</span><br><span class="line">var2=""</span><br><span class="line">[ `echo $&#123;var1&#125; | awk '&#123;print length&#125;'` -eq 0 ] &amp;&amp; echo 1 || echo 2 # 2</span><br><span class="line">[ `echo $&#123;var2&#125; | awk '&#123;print length&#125;'` -eq 0 ] &amp;&amp; echo 1 || echo 2 # 1</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ansike.github.io/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E5%88%A4%E6%96%AD%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%95%BF%E5%BA%A6%E4%B8%BA0/" data-id="clzmdspfq0072zwl103pnet5r" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/shell/" rel="tag">shell</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-编程/shell/条件测试" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95/" class="article-date">
  <time datetime="2021-05-05T14:46:13.000Z" itemprop="datePublished">2021-05-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/programming/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95/">条件测试</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="测试语法"><a href="#测试语法" class="headerlink" title="测试语法"></a>测试语法</h5><ol>
<li>test &lt;测试表达式&gt;</li>
<li>[ &lt;测试表达式&gt; ]  # 常用这个</li>
<li>[[ &lt;测试表达式&gt; ]]</li>
<li>((&lt;测试表达式&gt;))</li>
</ol>
<ul>
<li>1和2是等价的</li>
<li>[[]]为test拓展的命令，常用语通配符进行模式匹配。&amp;&amp;,||,&gt;,&lt;可以使用</li>
<li>(())常用语计算</li>
</ul>
<h5 id="test使用"><a href="#test使用" class="headerlink" title="test使用"></a>test使用</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 判断file文件是否存在</span></span><br><span class="line">test -f file &amp;&amp; echo 1 || echo 0</span><br><span class="line"><span class="meta">#</span><span class="bash"> 判断字符串长度是否为0</span></span><br><span class="line">test -z "file" &amp;&amp; echo 1 || echo 0</span><br></pre></td></tr></table></figure>
<h5 id="使用"><a href="#使用" class="headerlink" title="[]使用"></a>[]使用</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 判断file文件是否存在</span></span><br><span class="line">[ -f file ] &amp;&amp; echo 1 || echo 0</span><br><span class="line"><span class="meta">#</span><span class="bash"> 判断字符串长度是否为0</span></span><br><span class="line">[ -z "file" ] &amp;&amp; echo 1 || echo 0</span><br><span class="line"><span class="meta">#</span><span class="bash"> -o 表示或者</span></span><br><span class="line">[ -z "file" -o -z "" ] &amp;&amp; echo 1 || echo 0</span><br><span class="line"><span class="meta">#</span><span class="bash"> -a 表示且</span></span><br><span class="line">[ -z "file" -a -z "" ] &amp;&amp; echo 1 || echo 0</span><br><span class="line">file=1</span><br><span class="line"><span class="meta">#</span><span class="bash"> 判断字符串相等</span></span><br><span class="line">[ "$file" = 1 ] &amp;&amp; echo 1 || echo 0</span><br></pre></td></tr></table></figure>
<h5 id="使用-1"><a href="#使用-1" class="headerlink" title="[[]]使用"></a>[[]]使用</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 判断file文件是否存在</span></span><br><span class="line">[[ -f file ]] &amp;&amp; echo 1 || echo 0</span><br><span class="line"><span class="meta">#</span><span class="bash"> 判断字符串长度是否为0</span></span><br><span class="line">[[ -z "file" ]] &amp;&amp; echo 1 || echo 0</span><br><span class="line"><span class="meta">#</span><span class="bash"> -o 表示或者</span></span><br><span class="line">[[ -z "file" || -z "" ]] &amp;&amp; echo 1 || echo 0</span><br><span class="line"><span class="meta">#</span><span class="bash"> -a 表示且</span></span><br><span class="line">[[ -z "file" &amp;&amp; -z "" ]] &amp;&amp; echo 1 || echo 0</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 判断字符串相等</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 等号两侧必须有空格</span></span><br><span class="line">str="2"</span><br><span class="line">[[ "$str" == 1 ]] &amp;&amp; echo 1 || echo 0</span><br><span class="line">[[ "$str" -eq 1 ]] &amp;&amp; echo 1 || echo 0</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://ansike.github.io/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95/" data-id="clzmdspfq0076zwl18hx84bub" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/shell/" rel="tag">shell</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-编程/shell/比较测试命令" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E6%AF%94%E8%BE%83%E6%B5%8B%E8%AF%95%E5%91%BD%E4%BB%A4/" class="article-date">
  <time datetime="2021-05-05T14:46:13.000Z" itemprop="datePublished">2021-05-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/programming/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E6%AF%94%E8%BE%83%E6%B5%8B%E8%AF%95%E5%91%BD%E4%BB%A4/">常用测试语法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li><a href="#filedir">文件测试语法</a></li>
<li><a href="#string">字符串测试语法</a></li>
<li><a href="#intenger">整数二元比较操作符</a></li>
<li><a href="#logical">逻辑操作符</a></li>
</ol>
<h3 id="filedir">文件目录测试语法</h3>

<ol>
<li>-d 判断是目录</li>
<li>-f 判断是文件</li>
<li>-e 判断目录或者文件存在</li>
<li>-r 判断文件可读</li>
<li>-s 判断文件大小不为 0 为真</li>
<li>-x 判断文件可执行</li>
<li>-w 判断文件可写</li>
<li>-L 文件存在且链接文件为真</li>
<li>f1 -nt f2 f1 比 f2 新则为真</li>
<li>f1 -ot f2 f1 比 f2 旧则为真</li>
</ol>
<ul>
<li>1 和 2 是等价的</li>
<li>[[]]为 test 拓展的命令，常用语通配符进行模式匹配。&amp;&amp;,||,&gt;,&lt;可以使用</li>
<li>(())常用于计算</li>
</ul>
<h5 id="示例示例"><a href="#示例示例" class="headerlink" title="示例示例"></a>示例示例</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[ -d public ] &amp;&amp; echo 1</span><br><span class="line">[ -s package.json ] &amp;&amp; echo 1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">  不存在的变量必须加引号包裹</span></span><br><span class="line">[ -f $a ] &amp;&amp; echo 1 || echo 0 # 1</span><br><span class="line">[ -f "$a" ] &amp;&amp; echo 1 || echo 0 # 0</span><br></pre></td></tr></table></figure>

<h3 id="string">字符串测试语法</h3>
1. -n "字符串" 判断字符串长度不为0为真[no zero]
1. -z "字符串" 判断字符串长度为0为真  [zero]
1. "字符串1" = "字符串2" 相等为真
1. "字符串1" != "字符串2" 不等为真

<ul>
<li>字符串测试时必须加引号，不加很有可能发生语法没问题，但是逻辑结果和预期的不一致</li>
</ul>
<h5 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[ "a" = "a" ] &amp;&amp; echo 1 || echo 0</span><br><span class="line">[ "a" != "b" ] &amp;&amp; echo 1 || echo 0</span><br></pre></td></tr></table></figure>

<h3 id="intenger">整数二元比较操作符</h3>
1. -eq 相等在test和[]中是这样，在[[]]和(())是 ==或者=
1. -ne 不等在test和[]中是这样，在[[]]和(())是 !=
1. -gt 大于在test和[]中是这样，在[[]]和(())是 >
1. -lt 小于在test和[]中是这样，在[[]]和(())是 <
1. -ge 大于等于在test和[]中是这样，在[[]]和(())是 >=
1. -le 小于等于在test和[]中是这样，在[[]]和(())是 <=

<ul>
<li>[]也可以使用=, !=。注意使用&lt;,&gt;时使用转义字符</li>
</ul>
<h5 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 尽量按照上诉规则</span></span><br><span class="line">[ 1 -gt 2 ] &amp;&amp; echo 1 || echo 0 # 0</span><br><span class="line"><span class="meta">#</span><span class="bash"> [ 1 &gt; 2 ] &amp;&amp; <span class="built_in">echo</span> 1 || <span class="built_in">echo</span> 0 <span class="comment"># 1 注意此处的&gt;需要\转义</span></span></span><br></pre></td></tr></table></figure>

<h3 id="logical">逻辑操作符</h3>

<ol>
<li>-a 相等在 test 和[]中是这样，在[[]]和(())是 &amp;&amp;</li>
<li>-o 相等在 test 和[]中是这样，在[[]]和(())是 ||</li>
<li>! 相等在 test 和[]中是这样，在[[]]和(())是 !</li>
</ol>
<ul>
<li>[]也可以使用=, !=。注意使用&lt;,&gt;时使用转义字符</li>
</ul>
<h5 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[ -z "file" -a -z "" ] &amp;&amp; echo 1 || echo 0</span><br><span class="line">[ -z "file" -o -z "" ] &amp;&amp; echo 1 || echo 0</span><br><span class="line">[[ -z "file" &amp;&amp; -z "" ]] &amp;&amp; echo 1 || echo 0</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ansike.github.io/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E6%AF%94%E8%BE%83%E6%B5%8B%E8%AF%95%E5%91%BD%E4%BB%A4/" data-id="clzmdspfq0079zwl1c7kn0myf" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/shell/" rel="tag">shell</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-编程/shell/系统相关命令" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/" class="article-date">
  <time datetime="2021-05-05T14:46:13.000Z" itemprop="datePublished">2021-05-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/programming/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/">系统相关命令</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="du-disk-usage-递归查看文件夹下所有文件的大小"><a href="#du-disk-usage-递归查看文件夹下所有文件的大小" class="headerlink" title="du [disk usage] 递归查看文件夹下所有文件的大小"></a>du [disk usage] 递归查看文件夹下所有文件的大小</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 文件夹占用空间查看</span></span><br><span class="line">du -sh</span><br><span class="line"><span class="meta">#</span><span class="bash"> 当前目录下一级子文件和子目录占用的磁盘容量</span></span><br><span class="line">du -lh --max-depth=1</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ansike.github.io/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/" data-id="clzmdspfr007bzwl16mi89sa9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/shell/" rel="tag">shell</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-编程/shell/邮件报警脚本及实现" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6%E8%84%9A%E6%9C%AC%E5%8F%8A%E5%AE%9E%E7%8E%B0/" class="article-date">
  <time datetime="2021-05-05T14:46:13.000Z" itemprop="datePublished">2021-05-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/programming/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6%E8%84%9A%E6%9C%AC%E5%8F%8A%E5%AE%9E%E7%8E%B0/">Linux邮件报警脚本及实现【阿里云服务器，Centos8】</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><code>实现: 监控linux机器内存，低于阈值则邮件报警，每三分钟检查一次。</code></p>
<h3 id="拆分步骤"><a href="#拆分步骤" class="headerlink" title="拆分步骤"></a>拆分步骤</h3><ol>
<li>获取内存大小</li>
<li>判断是否小于阈值</li>
<li>发送邮件</li>
</ol>
<h4 id="获取内存大小"><a href="#获取内存大小" class="headerlink" title="获取内存大小"></a>获取内存大小</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Display amount of free and used memory <span class="keyword">in</span> the system</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -b 　以Byte为单位显示内存使用情况。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -k 　以KB为单位显示内存使用情况。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -m 　以MB为单位显示内存使用情况。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -o 　不显示缓冲区调节列。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -s     &lt;间隔秒数&gt; 　持续观察内存使用状况。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -t 　显示内存总和列。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -V 　显示版本信息。</span></span><br><span class="line">free </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看空闲的空间大小</span></span><br><span class="line">Memo=`free -m | awk 'NR==3 &#123;print $NF&#125;'`</span><br></pre></td></tr></table></figure>
<h4 id="判断是否小于阈值"><a href="#判断是否小于阈值" class="headerlink" title="判断是否小于阈值"></a>判断是否小于阈值</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Limit=10000</span><br><span class="line">if [ "$Memo" -lt "$Limit" ]</span><br><span class="line">  then</span><br><span class="line">    echo "开始发送邮件"</span><br><span class="line">    exit 0;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<h4 id="发送邮件，使用163邮件服务"><a href="#发送邮件，使用163邮件服务" class="headerlink" title="发送邮件，使用163邮件服务"></a>发送邮件，使用163邮件服务</h4><p><code>使用本地邮件客户端，mailx</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">yum install mailx -y</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置邮件的smtp服务为163，因为服务器用了阿里云，所以不能使用默认的25端口，只能使用ssl的端口默认465</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 请求数字证书</span></span><br><span class="line">mkdir -p /root/.certs/  # 创建目录，用来存放证书</span><br><span class="line">echo -n | openssl s_client -connect smtp.163.com:465 | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' &gt; ~/.certs/163.crt  # 向163请求证书</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 注意password为163申请的token，在163官网的设置页面创建一个第三方邮件客户端的专用密码，注意更换为自己的</span></span><br><span class="line">echo -e 'set from=15910250965@163.com smtp=smtps://smtp.163.com:465\nset smtp-auth-user=15910250965@163.com smtp-auth-password=XXXX smtp-auth-login' &gt;&gt; /etc/mail.rc</span><br></pre></td></tr></table></figure>
<p><a href="https://blog.csdn.net/qq_42859864/article/details/84862977" target="_blank" rel="noopener">参考链接</a></p>
<h1 id="执行一下命令。查看邮件或者垃圾箱中是否是新发的邮件"><a href="#执行一下命令。查看邮件或者垃圾箱中是否是新发的邮件" class="headerlink" title="执行一下命令。查看邮件或者垃圾箱中是否是新发的邮件"></a>执行一下命令。查看邮件或者垃圾箱中是否是新发的邮件</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo "body" | mailx -s "title" 15910250965@163.com</span><br></pre></td></tr></table></figure>

<h4 id="完整脚本"><a href="#完整脚本" class="headerlink" title="完整脚本"></a>完整脚本</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> monitor.sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash">!bin/bash</span></span><br><span class="line">set -e</span><br><span class="line">Limit=10000</span><br><span class="line">Memo=`free -m | awk 'NR==3 &#123;print $NF&#125;'`</span><br><span class="line"></span><br><span class="line">if [ "$Memo" -lt "$Limit" ]</span><br><span class="line">  then</span><br><span class="line">    echo "开始发送邮件"</span><br><span class="line">    echo "内存小于【$Limit】，当前内存剩余【$Memo】" | mail -s "内存紧张报警邮件" 15910250965@163.com</span><br><span class="line">    [ $? -eq 0 ] &amp;&amp; &#123;</span><br><span class="line">      echo "发送邮件成功"</span><br><span class="line">      exit 0;</span><br><span class="line">    &#125; || &#123;</span><br><span class="line">      echo "发送邮件失败"</span><br><span class="line">      exit 1;</span><br><span class="line">    &#125;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p><a href="https://www.runoob.com/w3cnote/linux-crontab-tasks.html" target="_blank" rel="noopener">https://www.runoob.com/w3cnote/linux-crontab-tasks.html</a></p>
<h4 id="使用crontab设置定时任务"><a href="#使用crontab设置定时任务" class="headerlink" title="使用crontab设置定时任务"></a>使用crontab设置定时任务</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> -e (编辑工作表)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -l (列出工作表里的命令)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -r (删除工作作)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> crontab [-u username] <span class="comment"># 省略用户表表示操作当前用户的crontab</span></span></span><br><span class="line">crontab -e</span><br><span class="line"><span class="meta">#</span><span class="bash"> eidt </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 分 时 天 周 月</span></span><br><span class="line">3 * * * * sh ~/job/monitor.sh</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://ansike.github.io/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6%E8%84%9A%E6%9C%AC%E5%8F%8A%E5%AE%9E%E7%8E%B0/" data-id="clzmdspfr007ezwl15xmb1zrf" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/shell/" rel="tag">shell</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-编程/shell/检查web站点正常" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E6%A3%80%E6%9F%A5web%E7%AB%99%E7%82%B9%E6%AD%A3%E5%B8%B8/" class="article-date">
  <time datetime="2021-05-05T14:46:13.000Z" itemprop="datePublished">2021-05-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/programming/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E6%A3%80%E6%9F%A5web%E7%AB%99%E7%82%B9%E6%AD%A3%E5%B8%B8/">function函数实战-脚本检查web站点正常</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>检查方式</p>
<ol>
<li>wget 访问站点 eg: wget –spider <a href="https://ansike.github.io/blog/">https://ansike.github.io/blog/</a></li>
<li>curl 访问站点 eg: curl –connect-timeout 5 -o /dev/null -s -w “%{http_code}\n” <a href="https://ansike.github.io/blog/">https://ansike.github.io/blog/</a></li>
</ol>
<h3 id="常规写法"><a href="#常规写法" class="headerlink" title="常规写法"></a>常规写法</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 使用wget检查站点服务是否正常</span></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">[ $# -ne 1 ] &amp;&amp; &#123;</span><br><span class="line">  echo "USAGE:$0 url"</span><br><span class="line">  exit 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">wget --spider -q -T 2 -t 1 -o /dev/null $1</span><br><span class="line"></span><br><span class="line">[ $? -eq 0 ] &amp;&amp; &#123;</span><br><span class="line">  echo "$1 is success"</span><br><span class="line">  exit 0</span><br><span class="line">&#125; || &#123;</span><br><span class="line">  echo "$1 is error"</span><br><span class="line">  exit 2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="函数写法"><a href="#函数写法" class="headerlink" title="函数写法"></a>函数写法</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 使用wget检查站点服务是否正常</span></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">. /etc/init.d/functions</span><br><span class="line">function usage () &#123;</span><br><span class="line">  echo "USAGE:$0 url"</span><br><span class="line">  exit 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function check_url () &#123;</span><br><span class="line">  wget --spider -q -T 2 -t 1 -o /dev/null $1</span><br><span class="line">  [ $? -eq 0 ] &amp;&amp; &#123;</span><br><span class="line">    action "$1 is success" /bin/true</span><br><span class="line">    exit 0</span><br><span class="line">  &#125; || &#123;</span><br><span class="line">    action "$1 is error" /bin/false</span><br><span class="line">    exit 2</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function main () &#123;</span><br><span class="line">  [ $# -ne 1 ] &amp;&amp; &#123;</span><br><span class="line">    usage</span><br><span class="line">  &#125;</span><br><span class="line">  check_url $1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main $*</span><br></pre></td></tr></table></figure>

<h3 id="while守护进程方式-循环检测。失败超过阈值退出"><a href="#while守护进程方式-循环检测。失败超过阈值退出" class="headerlink" title="while守护进程方式,循环检测。失败超过阈值退出"></a>while守护进程方式,循环检测。失败超过阈值退出</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 使用wget检查站点服务是否正常</span></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">. /etc/init.d/functions</span><br><span class="line">function usage () &#123;</span><br><span class="line">  echo "USAGE:$0 url"</span><br><span class="line">  exit 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function check_url () &#123;</span><br><span class="line">  </span><br><span class="line">  [ `curl --connect-timeout 5 -o /dev/null -s -w "%&#123;http_code&#125;\n" $1 | egrep -w "200|301|302" | wc -l` -eq 1 ] &amp;&amp; &#123;</span><br><span class="line">    action "$1 is success" /bin/true</span><br><span class="line">  &#125; || &#123;</span><br><span class="line">    action "$1 is error" /bin/false</span><br><span class="line">    return 2</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">function</span> <span class="function"><span class="title">check_url</span></span> () &#123;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   wget --spider -q -T 2 -t 1 -o /dev/null <span class="variable">$1</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">   [ $? -eq 0 ] &amp;&amp; &#123;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">     action <span class="string">"<span class="variable">$1</span> is success"</span> /bin/<span class="literal">true</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">   &#125; || &#123;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">     action <span class="string">"<span class="variable">$1</span> is error"</span> /bin/<span class="literal">false</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">     <span class="built_in">return</span> 2</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   &#125;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &#125;</span></span><br><span class="line"></span><br><span class="line">function main () &#123;</span><br><span class="line">  [ $# -ne 1 ] &amp;&amp; &#123;</span><br><span class="line">    usage</span><br><span class="line">  &#125;</span><br><span class="line">  TIMES=0</span><br><span class="line">  while [ $TIMES -lt 3 ]</span><br><span class="line">  do</span><br><span class="line">    check_url $1</span><br><span class="line">    [ $? -eq 0 ] || &#123;</span><br><span class="line">      ((++TIMES))</span><br><span class="line">    &#125;</span><br><span class="line">    sleep 1</span><br><span class="line">  done</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main $*</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ansike.github.io/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E6%A3%80%E6%9F%A5web%E7%AB%99%E7%82%B9%E6%AD%A3%E5%B8%B8/" data-id="clzmdspfr007gzwl12hwdcf82" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/shell/" rel="tag">shell</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-编程/shell/通过传参的方式添加用户" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E9%80%9A%E8%BF%87%E4%BC%A0%E5%8F%82%E7%9A%84%E6%96%B9%E5%BC%8F%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7/" class="article-date">
  <time datetime="2021-05-05T14:46:13.000Z" itemprop="datePublished">2021-05-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/programming/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E9%80%9A%E8%BF%87%E4%BC%A0%E5%8F%82%E7%9A%84%E6%96%B9%E5%BC%8F%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7/">通过传参的方式往conf文件中添加用户</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h2><ol>
<li>通过传参往<code>/etc/openvpn_authfile.conf</code>文件中添加用户</li>
<li>要求语法为<code>USAGE: sh adduser {-add|-del|-search} username</code></li>
<li>限制:同名的不能添加,不存在的不能删除,查找不到用户给出提示</li>
<li><code>/etc/openvpn_authfile.conf</code>不能被非root用户删除或者修改</li>
</ol>
<h2 id="实现过程"><a href="#实现过程" class="headerlink" title="实现过程"></a>实现过程</h2><ol>
<li>判断入参$n, 数量$#和参数值</li>
<li>涉及到文件操作,判断文件存在性.设置文件操作权限<code>charttr</code></li>
<li>判断用户的身份</li>
<li>文件内容检索使用<code>grep</code>, 操作文件内容用<code>cat</code>和<code>sed</code></li>
</ol>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">set -e</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> load lib <span class="keyword">function</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> . /etc/init.d/<span class="built_in">functions</span></span></span><br><span class="line"></span><br><span class="line">FILE_PATH=/temp/openvpn_authfile.conf</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> [ <span class="string">"<span class="variable">$UID</span>"</span> -ne 0 ] &amp;&amp; &#123;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   <span class="built_in">echo</span> <span class="string">"You are not super user, please call root."</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">   <span class="built_in">exit</span> 1</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &#125;</span></span><br><span class="line"></span><br><span class="line">function usage()&#123;</span><br><span class="line">  echo "USAGE: sh $0 &#123;-add|-del|-search&#125; username"</span><br><span class="line">  exit 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[ $# -ne 2 ] &amp;&amp; &#123;</span><br><span class="line">  usage</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[ ! -f "$FILE_PATH" ] &amp;&amp; touch "$FILE_PATH"</span><br><span class="line"></span><br><span class="line">case "$1" in</span><br><span class="line">  -a|-add)</span><br><span class="line">    shift # 位置参数左移</span><br><span class="line">    if [ `grep "^$1$" "$FILE_PATH" 2&gt;&amp;1` ]</span><br><span class="line">      then</span><br><span class="line">      echo "user: $1 is exist."</span><br><span class="line">      exit</span><br><span class="line">    else</span><br><span class="line">      # 加锁操作可能和mac不一致</span><br><span class="line">      # chattr -i "$FILE_PATH"</span><br><span class="line">      /bin/cp $&#123;FILE_PATH&#125; "$&#123;FILE_PATH&#125;.$(date +%F%T)"</span><br><span class="line">      echo $1 &gt;&gt; $&#123;FILE_PATH&#125;</span><br><span class="line">      [ $? -eq 0 ] &amp;&amp; &#123;</span><br><span class="line">        echo "Add user: $1 success"</span><br><span class="line">      &#125;</span><br><span class="line">      exit</span><br><span class="line">      # chattr +i "$FILE_PATH"</span><br><span class="line">    fi</span><br><span class="line">  ;;</span><br><span class="line">  -d|-del)</span><br><span class="line">    shift</span><br><span class="line">    if [ `grep "\b$1\b" $&#123;FILE_PATH&#125; | wc -l` -lt 1 ]</span><br><span class="line">      then</span><br><span class="line">      echo "user $1 is not exist."</span><br><span class="line">      exit</span><br><span class="line">    else</span><br><span class="line">      /bin/cp $&#123;FILE_PATH&#125; "$&#123;FILE_PATH&#125;.$(date +%F%T)"</span><br><span class="line">      sed -i "/^$1$/d" $&#123;FILE_PATH&#125;</span><br><span class="line">      [ $? -eq 0 ] &amp;&amp; &#123;</span><br><span class="line">        echo "Del user: $1 success"</span><br><span class="line">      &#125;</span><br><span class="line">      exit</span><br><span class="line">    fi  </span><br><span class="line">  ;;</span><br><span class="line">  -s|-search)</span><br><span class="line">    shift</span><br><span class="line">    if [ `grep -w "$1" $&#123;FILE_PATH&#125; | wc -l` -lt 1 ]</span><br><span class="line">      then</span><br><span class="line">      echo "user $1 is not exist."</span><br><span class="line">      exit</span><br><span class="line">    else</span><br><span class="line">      echo "user: $1 is exist."</span><br><span class="line">      exit</span><br><span class="line">    fi  </span><br><span class="line">  ;;</span><br><span class="line">  *)</span><br><span class="line">    usage</span><br><span class="line">  ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<h2 id="总结其中几个点"><a href="#总结其中几个点" class="headerlink" title="总结其中几个点"></a>总结其中几个点</h2><ol>
<li>grep精确过滤单词的三种方式<code>grep -w &quot;$var&quot; file</code>, <code>grep &quot;\b$var\b&quot; file</code>, <code>grep &quot;^$var$&quot; file</code></li>
<li>文件加锁和解锁<code>chattr -i file</code>和<code>chattr +i file</code></li>
<li>shift 变量左移</li>
<li>$UID 获取当前用户的UID</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ansike.github.io/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E9%80%9A%E8%BF%87%E4%BC%A0%E5%8F%82%E7%9A%84%E6%96%B9%E5%BC%8F%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7/" data-id="clzmdspfr007kzwl18q32enqe" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/shell/" rel="tag">shell</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-编程/shell/监控Nginx和Mysql服务" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E7%9B%91%E6%8E%A7Nginx%E5%92%8CMysql%E6%9C%8D%E5%8A%A1/" class="article-date">
  <time datetime="2021-05-05T14:46:13.000Z" itemprop="datePublished">2021-05-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/programming/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E7%9B%91%E6%8E%A7Nginx%E5%92%8CMysql%E6%9C%8D%E5%8A%A1/">监控Nginx和Mysql服务是否正常,如果未启动则启动相应服务</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>环境：CentOS Linux release 8.1.1911 (Core)<br>软件：</p>
<blockquote>
<p>mysql Ver 8.0.21 for Linux on x86_64 (Source distribution),<br>nginx version: nginx/1.14.1</p>
</blockquote>
</blockquote>
<h2 id="一、问题分析"><a href="#一、问题分析" class="headerlink" title="一、问题分析"></a>一、问题分析</h2><ol>
<li>怎么判断服务是否正常运行</li>
<li>启动相应的服务</li>
</ol>
<h3 id="1-1、判断服务正常运行"><a href="#1-1、判断服务正常运行" class="headerlink" title="1.1、判断服务正常运行"></a>1.1、判断服务正常运行</h3><ol>
<li>通过查询服务监听端口</li>
</ol>
<ul>
<li>本地端口查询常见命令：netstat,ss,lsof</li>
<li>远程端口查询常见命令：telnet,nmap,nc</li>
</ul>
<ol start="2">
<li>查询服务启动进程</li>
</ol>
<ul>
<li>ps -ef | grep nginx | wc -l</li>
<li>ps -ef | grep mysql | wc -l</li>
</ul>
<ol start="3">
<li>访问服务提供的能力</li>
</ol>
<ul>
<li>web 服务可以直接使用 wget 或者 curl 访问<blockquote>
<p>判断执行返回值$?<br>返回特殊字符<br>跟进 http 响应头</p>
</blockquote>
</li>
<li>mysql 可以连接客户端，根据返回值或返回内容判断</li>
<li>命令解析<blockquote>
<p>1.netstat -lntp # 查询网络服务中（状态为监听【l:listen】，端口保持数字【n:numberic】，TCP 服务【t:tcp】，展示服务进程名称【p:process】）的服务<br>2.ss -lntp # 和上方的参数含义一致，注意 n 是必须的，否则会被泛解析成 service name<br>3.lsof -i -n -P # i 监听的文件，-n[numberic]这个是禁止 host 转换为 host name 和上边两个不一样，-P 禁止转换端口</p>
</blockquote>
</li>
<li>Tips：对端口和进程进行判断时，先通过 grep 过滤端口和进程，然后通过<code>wc -l</code>转换为行数进行判断。如果确实想采用取值的办法最好转换为字符串进行比较</li>
</ul>
<h3 id="1-2、启动相应的服务"><a href="#1-2、启动相应的服务" class="headerlink" title="1.2、启动相应的服务"></a>1.2、启动相应的服务</h3><ol>
<li><code>nginx</code> 直接启动 <code>man nginx</code> 查看命令</li>
<li><code>systemctl start mysqld.service</code><blockquote>
<p>mysql 是客户端程序，mysqld 是服务端程序。这就是为什么要启动 mysql 服务，需要启动的是 mysqld 而不是 mysql。且 mysqld 启动的后就可以用 mysql 连接了。</p>
</blockquote>
</li>
</ol>
<h2 id="二、Nginx-服务监听"><a href="#二、Nginx-服务监听" class="headerlink" title="二、Nginx 服务监听"></a>二、Nginx 服务监听</h2><ol>
<li><p>端口号判断</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 通过端口号比较</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 该方法在服务未启动，端口不存在会报错</span></span><br><span class="line">[ "`netstat -lnt | grep 80 | awk -F "[ :]+" 'NR==1 &#123;print $5&#125;'`" -eq "80" ] &amp;&amp; &#123;</span><br><span class="line">  echo "Nginx is running."</span><br><span class="line">&#125; || &#123;</span><br><span class="line">  echo "Nginx is stopped."</span><br><span class="line"><span class="meta">  #</span><span class="bash"> 启动nginx</span></span><br><span class="line">  nginx</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> netstat通过行数判断【推荐】</span></span><br><span class="line">[ `netstat -lntp | grep 80 | wc -l` -gt 0 ] &amp;&amp; &#123;</span><br><span class="line">  echo "Nginx is running."</span><br><span class="line">&#125; || &#123;</span><br><span class="line">  echo "Nginx is stopped."</span><br><span class="line"><span class="meta">  #</span><span class="bash"> 启动nginx</span></span><br><span class="line">  nginx</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ss通过行数判断【推荐】</span></span><br><span class="line">[ `ss -lntp | grep 80 | wc -l` -gt 0 ] &amp;&amp; &#123;</span><br><span class="line">  echo "Nginx is running."</span><br><span class="line">&#125; || &#123;</span><br><span class="line">  echo "Nginx is stopped."</span><br><span class="line"><span class="meta">  #</span><span class="bash"> 启动nginx</span></span><br><span class="line">  nginx</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> lsof通过行数判断【推荐】</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> [ `lsof -i -n -P | grep 80 | wc -l` -gt 0 ] &amp;&amp; &#123;</span></span><br><span class="line">[ `lsof -i:80 -n -P | wc -l` -gt 0 ] &amp;&amp; &#123;</span><br><span class="line">  echo "Nginx is running."</span><br><span class="line">&#125; || &#123;</span><br><span class="line">  echo "Nginx is stopped."</span><br><span class="line"><span class="meta">  #</span><span class="bash"> 启动nginx</span></span><br><span class="line">  nginx</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 通过telnet判断连接状态</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span>的作用是关闭连接，不输出错误</span></span><br><span class="line">[ `echo "" | telnet www.baidu.com 80 2&gt;/dev/null | grep Connected | wc -l` -gt 0 ] &amp;&amp; &#123;   echo "服务状态：success"; &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 通过nmap扫描到的`open`判断服务状态</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果为filtered说明包过滤阻止探测报文到达端口。服务不一定没有启动，可能有防火墙</span></span><br><span class="line">[ `nmap www.baidu.com -p 80 | grep open | wc -l` -gt 0 ] &amp;&amp; &#123;</span><br><span class="line">  echo "服务状态：success"</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 通过nc扫描结果判断服务状态</span></span><br><span class="line">nc -w 2 www.baidu.com 80</span><br><span class="line">[ $? -eq 0 ] &amp;&amp; &#123;</span><br><span class="line">  echo "服务状态：success"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>进程判断</p>
</li>
</ol>
<ul>
<li>通过这种方式去grep进程时一定要注意把当前命令从结果中排除，添加<code>| grep -v grep |</code>管道，否则会拿到grep进程包含服务名称的查找<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ps通过行数判断【推荐】</span></span><br><span class="line">[ `ps -ef | grep -v grep | grep nginx | wc -l` -gt 0 ] &amp;&amp; &#123;</span><br><span class="line">  echo "Nginx is running."</span><br><span class="line">&#125; || &#123;</span><br><span class="line">  echo "Nginx is stopped."</span><br><span class="line"><span class="meta">  #</span><span class="bash"> 启动nginx</span></span><br><span class="line">  nginx</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="3">
<li><p>访问服务提供的能力</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">curl http://www.baidu.com &amp;&gt;/dev/null --connect-timeout 1</span><br><span class="line">echo $? # 0</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将com换成con</span></span><br><span class="line">curl http://www.baidu.con &amp;&gt;/dev/null --connect-timeout 1</span><br><span class="line">echo $? # 非0</span><br><span class="line"><span class="meta">#</span><span class="bash"> wget 类似</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 根据http状态码去判断</span></span><br><span class="line">curl -I www.baidu.com -o /dev/null -s -w "%&#123;http_code&#125;\n" # 200</span><br></pre></td></tr></table></figure>
<h2 id="三、Mysql-服务监听"><a href="#三、Mysql-服务监听" class="headerlink" title="三、Mysql 服务监听"></a>三、Mysql 服务监听</h2><p>mysql的判断和nginx类似，以下备注会减少</p>
</li>
<li><p>端口号判断</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 本地端口查询</span></span><br><span class="line">[ "`netstat -lnt | grep 3306 | awk -F "[ :]+" 'NR==1 &#123;print $5&#125;'`" -eq "3306" ] &amp;&amp; &#123;</span><br><span class="line">  echo "Mysql is running."</span><br><span class="line">&#125; || &#123;</span><br><span class="line">  echo "Mysql is stopped."</span><br><span class="line"><span class="meta">  #</span><span class="bash"> 启动Mysql</span></span><br><span class="line">  systemctl start mysqld</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[ `netstat -lnt | grep 3306 | wc -l` -gt 1 ] &amp;&amp; &#123;</span><br><span class="line">  echo "Mysql is running."</span><br><span class="line">&#125; || &#123;</span><br><span class="line">  echo "Mysql is stopped."</span><br><span class="line"><span class="meta">  #</span><span class="bash"> 启动Mysql</span></span><br><span class="line">  systemctl start mysqld</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[ `ss -lnt | grep 3306 | wc -l` -gt 1 ] &amp;&amp; &#123;</span><br><span class="line">  echo "Mysql is running."</span><br><span class="line">&#125; || &#123;</span><br><span class="line">  echo "Mysql is stopped."</span><br><span class="line"><span class="meta">  #</span><span class="bash"> 启动Mysql</span></span><br><span class="line">  systemctl start mysqld</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> [ `ss -i:3306 -n -P | wc -l` -gt 1 ] &amp;&amp; &#123;</span></span><br><span class="line">[ `ss -i -n -P | grep 3306 | wc -l` -gt 1 ] &amp;&amp; &#123;</span><br><span class="line">  echo "Mysql is running."</span><br><span class="line">&#125; || &#123;</span><br><span class="line">  echo "Mysql is stopped."</span><br><span class="line"><span class="meta">  #</span><span class="bash"> 启动Mysql</span></span><br><span class="line">  systemctl start mysqld</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 远程端口查询</span></span><br><span class="line">[ `echo "" | telnet 127.0.0.1 3306 2&gt;/dev/null | grep Connected | wc -l` -gt 0 ] &amp;&amp; &#123;   echo "服务状态：success"; &#125;</span><br><span class="line">[ `nmap 127.0.0.1 -p 3006 | grep open | wc -l` -gt 0 ] &amp;&amp; &#123;</span><br><span class="line">  echo "服务状态：success"</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 通过nc扫描结果判断服务状态</span></span><br><span class="line">nc -w 2 127.0.0.1 3006</span><br><span class="line">[ $? -eq 0 ] &amp;&amp; &#123;</span><br><span class="line">  echo "服务状态：success"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>进程判断</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ps通过行数判断【推荐】</span></span><br><span class="line">[ `ps -ef | grep -v grep | grep mysqld | wc -l` -gt 0 ] &amp;&amp; &#123;</span><br><span class="line">  echo "mysqld is running."</span><br><span class="line">&#125; || &#123;</span><br><span class="line">  echo "mysqld is stopped."</span><br><span class="line"><span class="meta">  #</span><span class="bash"> 启动mysql服务</span></span><br><span class="line">  systemctl start mysqld</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>服务判断<br>使用mysql客户端连接mysqld服务判断</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ansike.github.io/blog/programming/%E7%BC%96%E7%A8%8B/shell/%E7%9B%91%E6%8E%A7Nginx%E5%92%8CMysql%E6%9C%8D%E5%8A%A1/" data-id="clzmdspfr007nzwl156ht2u22" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/shell/" rel="tag">shell</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-编程/svg/svg动画" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/programming/%E7%BC%96%E7%A8%8B/svg/svg%E5%8A%A8%E7%94%BB/" class="article-date">
  <time datetime="2021-05-05T14:46:13.000Z" itemprop="datePublished">2021-05-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/programming/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/programming/%E7%BC%96%E7%A8%8B/svg/svg%E5%8A%A8%E7%94%BB/">SVG动画</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="结果展示"><a href="#结果展示" class="headerlink" title="结果展示"></a>结果展示</h3><h3 id="代码分析"><a href="#代码分析" class="headerlink" title="代码分析"></a>代码分析</h3><h3 id="原理分析"><a href="#原理分析" class="headerlink" title="原理分析"></a>原理分析</h3><h3 id="知识点总结"><a href="#知识点总结" class="headerlink" title="知识点总结"></a>知识点总结</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://ansike.github.io/blog/programming/%E7%BC%96%E7%A8%8B/svg/svg%E5%8A%A8%E7%94%BB/" data-id="clzmdspfr007qzwl154abf3dd" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/svg/" rel="tag">svg</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/%E5%8A%A8%E7%94%BB/" rel="tag">动画</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/blog/page/18/">&lt; 上一页</a><a class="page-number" href="/blog/">1</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/17/">17</a><a class="page-number" href="/blog/page/18/">18</a><span class="page-number current">19</span><a class="page-number" href="/blog/page/20/">20</a><a class="page-number" href="/blog/page/21/">21</a><a class="extend next" rel="next" href="/blog/page/20/">下一页 &gt;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/%E4%B9%A6%E7%B1%8D/">书籍</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/%E5%89%8D%E7%AB%AF/">前端</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/%E6%B8%B8%E6%88%8F/">游戏</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/life/">生活</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/programming/">编程</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/english/">英语</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/BTC/" rel="tag">BTC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Dapp/" rel="tag">Dapp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/ETH/" rel="tag">ETH</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/PC%E7%AB%AF/" rel="tag">PC端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/awk/" rel="tag">awk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/book/" rel="tag">book</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/bytecode/" rel="tag">bytecode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/canvas/" rel="tag">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/cat/" rel="tag">cat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/centos/" rel="tag">centos</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/clothes/" rel="tag">clothes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/cocos/" rel="tag">cocos</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/computed/" rel="tag">computed</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/css/" rel="tag">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/curl/" rel="tag">curl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/debian/" rel="tag">debian</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/economy/" rel="tag">economy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/encoding/" rel="tag">encoding</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/error/" rel="tag">error</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/expect/" rel="tag">expect</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/food/" rel="tag">food</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/grep/" rel="tag">grep</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/http/" rel="tag">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/js/" rel="tag">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/k8s/" rel="tag">k8s</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/language/" rel="tag">language</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/mac/" rel="tag">mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/mail/" rel="tag">mail</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/merge/" rel="tag">merge</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/mysql/" rel="tag">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/network/" rel="tag">network</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/node/" rel="tag">node</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/react/" rel="tag">react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/rebase/" rel="tag">rebase</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/restaurant/" rel="tag">restaurant</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/sed/" rel="tag">sed</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/shell/" rel="tag">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/ssh/" rel="tag">ssh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/svg/" rel="tag">svg</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/ts/" rel="tag">ts</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/vim/" rel="tag">vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/vue/" rel="tag">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/web3/" rel="tag">web3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/webpack/" rel="tag">webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/%E5%8A%A8%E7%94%BB/" rel="tag">动画</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/%E5%9B%BE%E8%A1%A8/" rel="tag">图表</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/" rel="tag">基础概念</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/%E5%A4%A7%E5%B1%8F/" rel="tag">大屏</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/" rel="tag">工程化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/%E6%89%8B%E6%9C%BA%E7%AB%AF/" rel="tag">手机端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/%E6%8E%92%E7%89%88/" rel="tag">排版</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/%E6%91%84%E5%BD%B1/" rel="tag">摄影</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/%E6%96%87%E6%A1%A3/" rel="tag">文档</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/%E6%AD%A3%E5%88%99/" rel="tag">正则</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/%E7%BD%91%E7%BB%9C/" rel="tag">网络</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/%E8%B7%AF%E7%94%B1%E5%99%A8/" rel="tag">路由器</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/blog/tags/BTC/" style="font-size: 16.67px;">BTC</a> <a href="/blog/tags/Dapp/" style="font-size: 10.83px;">Dapp</a> <a href="/blog/tags/ETH/" style="font-size: 15px;">ETH</a> <a href="/blog/tags/PC%E7%AB%AF/" style="font-size: 10px;">PC端</a> <a href="/blog/tags/awk/" style="font-size: 10px;">awk</a> <a href="/blog/tags/book/" style="font-size: 11.67px;">book</a> <a href="/blog/tags/bytecode/" style="font-size: 10px;">bytecode</a> <a href="/blog/tags/canvas/" style="font-size: 10.83px;">canvas</a> <a href="/blog/tags/cat/" style="font-size: 10px;">cat</a> <a href="/blog/tags/centos/" style="font-size: 10.83px;">centos</a> <a href="/blog/tags/clothes/" style="font-size: 10px;">clothes</a> <a href="/blog/tags/cocos/" style="font-size: 10px;">cocos</a> <a href="/blog/tags/computed/" style="font-size: 10px;">computed</a> <a href="/blog/tags/css/" style="font-size: 10px;">css</a> <a href="/blog/tags/curl/" style="font-size: 10px;">curl</a> <a href="/blog/tags/debian/" style="font-size: 10px;">debian</a> <a href="/blog/tags/docker/" style="font-size: 10px;">docker</a> <a href="/blog/tags/economy/" style="font-size: 11.67px;">economy</a> <a href="/blog/tags/encoding/" style="font-size: 10px;">encoding</a> <a href="/blog/tags/error/" style="font-size: 10px;">error</a> <a href="/blog/tags/expect/" style="font-size: 10px;">expect</a> <a href="/blog/tags/food/" style="font-size: 10px;">food</a> <a href="/blog/tags/git/" style="font-size: 11.67px;">git</a> <a href="/blog/tags/grep/" style="font-size: 10px;">grep</a> <a href="/blog/tags/http/" style="font-size: 10px;">http</a> <a href="/blog/tags/js/" style="font-size: 19.17px;">js</a> <a href="/blog/tags/k8s/" style="font-size: 16.67px;">k8s</a> <a href="/blog/tags/language/" style="font-size: 17.5px;">language</a> <a href="/blog/tags/linux/" style="font-size: 10px;">linux</a> <a href="/blog/tags/mac/" style="font-size: 10px;">mac</a> <a href="/blog/tags/mail/" style="font-size: 10px;">mail</a> <a href="/blog/tags/merge/" style="font-size: 10px;">merge</a> <a href="/blog/tags/mysql/" style="font-size: 14.17px;">mysql</a> <a href="/blog/tags/network/" style="font-size: 10px;">network</a> <a href="/blog/tags/node/" style="font-size: 11.67px;">node</a> <a href="/blog/tags/python/" style="font-size: 17.5px;">python</a> <a href="/blog/tags/react/" style="font-size: 10.83px;">react</a> <a href="/blog/tags/rebase/" style="font-size: 10px;">rebase</a> <a href="/blog/tags/restaurant/" style="font-size: 10px;">restaurant</a> <a href="/blog/tags/sed/" style="font-size: 10.83px;">sed</a> <a href="/blog/tags/shell/" style="font-size: 20px;">shell</a> <a href="/blog/tags/ssh/" style="font-size: 10px;">ssh</a> <a href="/blog/tags/svg/" style="font-size: 10px;">svg</a> <a href="/blog/tags/ts/" style="font-size: 10px;">ts</a> <a href="/blog/tags/vim/" style="font-size: 10px;">vim</a> <a href="/blog/tags/vue/" style="font-size: 10px;">vue</a> <a href="/blog/tags/web3/" style="font-size: 18.33px;">web3</a> <a href="/blog/tags/webpack/" style="font-size: 10px;">webpack</a> <a href="/blog/tags/%E5%8A%A8%E7%94%BB/" style="font-size: 11.67px;">动画</a> <a href="/blog/tags/%E5%9B%BE%E8%A1%A8/" style="font-size: 10px;">图表</a> <a href="/blog/tags/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/" style="font-size: 13.33px;">基础概念</a> <a href="/blog/tags/%E5%A4%A7%E5%B1%8F/" style="font-size: 10px;">大屏</a> <a href="/blog/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/" style="font-size: 11.67px;">工程化</a> <a href="/blog/tags/%E6%89%8B%E6%9C%BA%E7%AB%AF/" style="font-size: 10px;">手机端</a> <a href="/blog/tags/%E6%8E%92%E7%89%88/" style="font-size: 10px;">排版</a> <a href="/blog/tags/%E6%91%84%E5%BD%B1/" style="font-size: 10px;">摄影</a> <a href="/blog/tags/%E6%96%87%E6%A1%A3/" style="font-size: 10px;">文档</a> <a href="/blog/tags/%E6%AD%A3%E5%88%99/" style="font-size: 12.5px;">正则</a> <a href="/blog/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 15.83px;">网络</a> <a href="/blog/tags/%E8%B7%AF%E7%94%B1%E5%99%A8/" style="font-size: 10px;">路由器</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2024/05/">五月 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2023/12/">十二月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2023/09/">九月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2023/08/">八月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2023/07/">七月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2023/05/">五月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2023/03/">三月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2023/02/">二月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2023/01/">一月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2022/12/">十二月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2022/11/">十一月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2022/10/">十月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2022/09/">九月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2022/08/">八月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2022/07/">七月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2022/06/">六月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2022/05/">五月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2022/04/">四月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2022/03/">三月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2022/02/">二月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2022/01/">一月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2021/12/">十二月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2021/09/">九月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2021/07/">七月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2021/05/">五月 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/life/%E7%94%9F%E6%B4%BB/%E6%91%84%E5%BD%B1/%E6%91%84%E5%BD%B1%E6%9E%84%E5%9B%BE%E6%8A%80%E5%B7%A7/">摄影构图技巧</a>
          </li>
        
          <li>
            <a href="/blog/%E5%89%8D%E7%AB%AF/%E7%BC%96%E7%A8%8B/%E5%A4%A7%E5%B1%8F/bigscreen/">大屏项目</a>
          </li>
        
          <li>
            <a href="/blog/programming/%E7%BC%96%E7%A8%8B/js/%E9%87%8D%E5%AD%A6js/array/">array</a>
          </li>
        
          <li>
            <a href="/blog/programming/%E7%BC%96%E7%A8%8B/css/UI%E9%80%82%E9%85%8D/">UI适配</a>
          </li>
        
          <li>
            <a href="/blog/programming/%E7%BC%96%E7%A8%8B/msyql/%E9%94%81/">mysql 的锁</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2024 ask<br>
      <!-- Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> -->
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">首页</a>
  
    <a href="/blog/archives" class="mobile-nav-link">归档</a>
  
</nav>
    

<script src="//code.jquery.com/jquery-2.2.4.min.js"></script>

 
<link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">
 
<script src="/blog/fancybox/jquery.fancybox.pack.js"></script>
  
<script src="/blog/js/script.js"></script>
 
<script src="/blog/js/search_form.js"></script>
 


  </div>
</body>
</html>