---
title: shell脚本开发规范
---

[1.代码框架规范（目录规范）](#1)
[2.shell文件命名规范](#2)
[3.首行内容编写](#3)
[4.文件注释及行注释](#4)
[5.变量命名及定义规范](#5)
* [5.1 全局变量](#5.1)
* [5.2 局部变量](#5.2)
* [5.3 变量使用](#5.3)

[6.函数命名及定义规范](#6)


<h3 id="1">1.代码框架规范（目录规范）</h3>

在大型的程序中（如nginx）通常会将程序按照功能职责拆分成多个文件，放到对应的文件夹下，这在所有的程序开发中大致思路是一致的。文件或者目录分类大致为以下三类。
1. 入口文件
2. 配置文件
3. 工具函数

<h3 id="2">2.shell文件命名规范</h3>

1. 统一使用后缀`.sh`结尾
2. 根据函数的意思命名脚本
 2.1 开始和停止脚本`start_module.sh`，`stop_module.sh`
 2.2 监控脚本`*_mon.sh`
 2.3 控制脚本`*_ctl.sh`
<h3 id="3">3.首行内容编写</h3>

描述脚本的解释器，一般为`#!/bin/bash`。指定以该解释器执行脚本，非必须，但是属于优秀的规范和习惯。执行shell的时候可以自己指定解释器。
脚本的解释器还有：
1. Bourne Shell（/usr/bin/sh或/bin/sh）
1. Bourne Again Shell（/bin/bash）
1. C Shell（/usr/bin/csh）
1. K Shell（/usr/bin/ksh）
1. Shell for Root（/sbin/sh）

<h3 id="4">4.文件注释及行注释</h3>

文件注释一般由一下几部分构成
1. 日期
2. 作者
3. 邮箱
4. 脚本描述
5. 版本信息

```shell
# Date: 16:20 2021-04-17
# Author: ansike
# Mail: ansike@qq.com
# Description: deal ** fun
# Version: 1.0.0
```
尽量不要使用中文。必须使用中文的话，根据自身客户端对系统进行字符集调整。`export LANG="zh_CN.UTF-8"`
<h3 id="5">5.变量命名及定义规范</h3>
<h4 id="5.1">5.1全局变量（环境变量）</h4>

- 变量定义应该全部为大写，单词间通过下划线进行分割，位置一般放在系统路径中；
- 最好用export定义；
- 定时任务执行时，最好在shell中重新定义这些全局变量；

<h4 id="5.2">5.2局部变量（函数变量）</h4>

- 一般使用驼峰方式命名，在函数作用域内有效；
- 可以使用local定义；

<h4 id="5.3">5.变量使用</h4>

- 变量前后都有字符或字符串中使用变量时用`${}`包裹`${variable}`
- 变量内容为数字时$variable
- 变量容错${variable:-default}或者${variable:=default}

<h3 id="6">6.函数命名及定义规范</h3>

- 函数的书写通常有多种形式，最规范的方式`function funName(){ body }`
- 最好在函数结束时有`return`
