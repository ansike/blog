---
title: 命令行简介
categories: 编程
tags: shell
date: 2021-05-05 22:46:13
---

<a href="#cat">1. cat 合并文件或查看文件内容</a>
<a href="#tac">2. tac 反向显示文件内容</a>
<a href="#more">3. more 分页显示文件内容</a>
<a href="#less">4. less 分页显示文件内容</a>
<a href="#head">5. head 显示文件内容头部</a>
<a href="#tail">6. tail 显示文件内容尾部</a>
<a href="#tailf">7. tailf 跟踪日志文件</a>
<a href="#cur">8. cur 从文本中提取一段文字并输出</a>
<a href="#split">9. split 分割文件</a>
<a href="#paste">10. paste 合并文件</a>
<a href="#sort">11. sort 文本排序</a>
<a href="#join">12. join 按两个文件的相同字段进行合并</a>
<a href="#uniq">12. uniq 去除重复行</a>
<a href="#wc">13. wc 统计文件的行数，单词数或字节数</a>
<a href="#iconv">14. iconv 转换文件的编码格式</a>
<a href="#dos2unix">15. dos2unix DOS 格式转换成 UNIX</a>
<a href="#diff">16. diff 比较两个文件的不同</a>
<a href="#tr">17. tr 替换删除字符</a>
<a href="#vim">18. vim 纯文本编辑器</a>

<h3 id="cat">1. cat 合并文件或查看文件内容</h3>

功能说明: 连接多个文件并且打印到屏幕输出，或者重定向到指定的文件中。此命令常用来显示耽搁文件内容，或者将几个文件内容链接起来一起显示，还可以从标准输入中读取内容并显示，生产环境中它常与重定向或追加符号配合使用。

<b>常见功能</b>
| 序号 | 常用功能 | 示例 |
| ---- | ---------------------------------- | ------------------------------------------------------------------------- |
| 1 | 查看文件内容 | 例如：cat file.txt |
| 2 | 把多个文件合并成一个 | cat file1.txt file2.txt > newFile.txt |
| 4 | 非交互式编辑或者追加内容到文件尾部 | 忽略 br 换行, 会将内容追加到文件中: cat >>file.txt<<EOF<br/> xxxx<br/>EOF |
| 3 | 创建编辑新文件 | cat > file.txt，其实可以当成是非交互式的方式 |
| 5 | 清空文件内容 | cat /dev/null > file.txt |

语法: cat [option] [file]
<b>options</b>

| 命令 | 说明                          |
| ---- | ----------------------------- |
| -n   | 从 1 开始对输出的内容按行编号 |
| -b   | 和-n 类似，会忽略空白行       |

```shell
# 以下两种写法都OK，都会给文件追加内容
# cat >>c1.txt<<EOF
# cat <<EOF>>c2.txt
```

<h3 id="tac">2. tac 反向显示文件内容</h3>

| 命令 | 说明                           |
| ---- | ------------------------------ |
| -b   | 在行前添加分割标志             |
| -r   | 将分割标志视作正则表达式来解析 |
| -s   | 使用字符串替换作为分隔标志     |

<h3 id="more">3. more 分页显示文件内容</h3>

语法: more [oprion] [file]

| 命令 | 说明                                                                   |
| ---- | ---------------------------------------------------------------------- |
| -num | 指定屏幕大小显示为 num 行                                              |
| +num | 从行号 num 开始显示                                                    |
| -s   | 连续多个空行显示为一行                                                 |
| -p   | 不滚屏，清除整个屏幕，显示文本                                         |
| -c   | 不滚屏，从每屏的顶部开始显示文本，每显示完一行，就清楚这一行剩余的部分 |

```shell
# 分页展示etc/下所有目录
ls /etc|more -10
```

<h3 id="less">4. less 分页显示文件内容</h3>

功能说明: 是 more 的高级版本，不是反义词。它是真正的按需加在资源，更快的查看一个文件
语法: less [option] [file]

| 命令 | 说明                             |
| ---- | -------------------------------- |
| -i   | 搜索忽略大小写                   |
| -m   | 显示类似于 more 命令的进度百分比 |
| -N   | 显示每行的行号                   |
| -s   | 将连续空行压缩为一行             |
| -e   | 文件显示到末尾自动退出           |

<h3 id="head">5. head 显示文件内容头部</h3>

语法: less [option] [file]

| 命令 | 说明           |
| ---- | -------------- |
| -n   | 指定显示的行数 |
| -c   | 指定显示的字节 |
| -q   | 不显示文件头   |
| -v   | 显示文件头     |

<h3 id="tail">6. tail 显示文件内容尾部</h3>

语法: tail [option] [file]

| 命令 | 说明                   |
| ---- | ---------------------- |
| -n   | 指定显示的行数         |
| -c   | 指定显示的字节         |
| -f   | 实时输出变化后追加数据 |
| -q   | 不显示文件头           |
| -v   | 显示文件头             |

<h3 id="tailf">7. tailf 跟踪日志文件</h3>

和 tail -f 类似，但是文件不增长，他不会访问磁盘文件，也不会更改文件的访问时间

<h3 id="cur">8. cur 从文本中提取一段文字并输出</h3>

功能说明：从文件的每一行剪切字节、字符或字段，并将这些输出至标准输出

| 命令 | 说明                                  |
| ---- | ------------------------------------- |
| -b   | 按字节分隔                            |
| -n   | 取消分隔多字节字符，与-b 一起使用     |
| -c   | 按字符分隔                            |
| -d   | 自定义分隔符，默认为 tab              |
| -f   | 与-d 一起使用，展示分隔的区域         |
| N    | N 为数字，表示第 N 个字节、字符、字段 |
| N-   | 从第 N 个到末尾                       |
| N-M  | 从第 N 个到第 M 个                    |
| -M   | 从头到第 M 个                         |

<h3 id="split">9. split 分割文件</h3>

功能说明：从文件的每一行剪切字节、字符或字段，并将这些输出至标准输出

| 命令 | 说明                          |
| ---- | ----------------------------- |
| -b   | 按字节分隔                    |
| -l   | 按行分割                      |
| -a   | 指定后缀长度，默认为 2 位字母 |
| -d   | 使用数字后缀                  |

<h3 id="paste">10. paste 合并文件</h3>

与 cat 不同的是 paste 是按行进行合并的

| 命令 | 说明                         |
| ---- | ---------------------------- |
| -d   | 指定合并的分隔符，默认是 TAB |
| -s   | 每个文件占用一行             |

```shell
paste newc00 newc01
# c file  xxx
# xxx     xxx
```

<h3 id="sort">11. sort 文本排序</h3>

sort 默认按 ascii 进行升序排列

| 命令 | 说明                   |
| ---- | ---------------------- |
| -b   | 忽略每行存在的空格字符 |
| -n   | 按照数值的大小进行排序 |
| -r   | 倒序排序               |
| -u   | 去除重复行             |
| -t   | 指定分隔符             |
| -k   | 按指定区间排序         |

反向去重输出，以.为分隔符，先以第一部分排序，再以第二部分排序

```shell
sort -ru -t. -k1,1  -k2,2 ss
# 3.1.1.1
# 2.3.1.1
# 1.4.1.1
# 1.3.1.1
# 1.1.1.1
```

<h3 id="join">12. join 按两个文件的相同字段进行合并</h3>

语法: join [option] [file1] [file2]

特定规范文件的合并

<h3 id="uniq">12. uniq 去除重复行</h3>

输出或忽略文件中的重复行。工作中常见使用 sort 进行排序，然后使用 uniq 去重并计数

| 命令 | 说明                 |
| ---- | -------------------- |
| -c   | 去除重复行并统计次数 |
| -d   | 只显示重复的行       |
| -u   | 只显示唯一的行       |

<b>统计域名的访问次数</b>

```shell
cat file
# http://www.baidu.com/index.html
# http://www.sohu.com/index.html
# http://www.sina.com/index.html
# http://www.baidu.com/index.html
# http://www.toutiao.com/index.html
# http://www.toutiao.com/index.html
# http://www.youdao.com/index.html
cut -d '/' -f 3 file|sort|uniq -c|sort -rn
# 2 www.toutiao.com
# 2 www.baidu.com
# 1 www.youdao.com
# 1 www.sohu.com
# 1 www.sina.com
```

<h3 id="wc">13. wc 统计文件的行数，单词数或字节数</h3>

| 命令 | 说明         |
| ---- | ------------ |
| -l   | 统计行数     |
| -w   | 统计单词数   |
| -c   | 统计字节数   |
| -m   | 统计字符数   |
| -L   | 最长行的长度 |

<h3 id="iconv">14. iconv 转换文件的编码格式</h3>

语法: iconv [option] [-f from-encoding] [-t to-encoding] [inputfile]

| 命令         | 说明               |
| ------------ | ------------------ |
| -f encodingA | 从编码 A 转换      |
| -t encodingB | 转换成编码 B       |
| -l           | 显示系统支持的编码 |
| -o           | 输出到指定文件     |

<h3 id="dos2unix">15. dos2unix DOS格式转换成UNIX</h3>

因为在 dos 中换行是'\r\n'，在 linux 中是'\n'，需要做转换

> unix2dos 是转换回去的方法

<h3 id="diff">16. diff 比较两个文件的不同</h3>

语法: iconv [option] [file1] [file2]

| 命令 | 说明                           |
| ---- | ------------------------------ |
| -y   | 以并列的方式显示文件的异同之处 |
| -W   | -y 时 指定显示宽度             |
| -c   | 使用上下文的输出格式           |
| -u   | 使用统一的个数输出             |

> vimdiff 会以可视化的方式展示 diff

<h3 id="tr">17. tr 替换删除字符</h3>

语法: tr [option] [SET1] [SET2]

tr 的替换是按位替换
| 命令 | 说明 |
| ---- | ------------------------------ |
| -d | 删除字符 |
| -s | 保留连续字符的第一个字符，删除其他字符。字符去重 |
| -c | 使用第一个字符串的补集，取反 |

###### 实践

```shell
# 统一大小写
tr '[a-z]' '[A-Z]' <c1

# 删除特定字符串
tr -d 'a' <c1
# 删除换行，制表，空格
tr -d '\n\t\ ' <c1
```

<h3 id="vim">18. vim 纯文本编辑器</h3>

<b>普通模式</b>

| 命令           | 说明                                      |
| -------------- | ----------------------------------------- |
| gg             | 回到第一行                                |
| G              | 到最后一行                                |
| 0              | 到当前行的开头                            |
| $              | 到当前行的结尾                            |
| n<Enter>       | 向下移动 n 行                             |
| H              | 当前窗口最上方                            |
| M              | 当前窗口中间                              |
| L              | 当前窗口最下方                            |
| /              | 向下寻找字符串                            |
| ?              | 向上寻找字符串                            |
| n              | 向下重复前一个搜索动作                    |
| N              | 向上重复前一个搜索动作                    |
| :g/A/s//B/g    | 用 B 替换 A，斜线为分隔符，可用@，#等替代 |
| :%s/A/B/g      | 用 B 替换 A，斜线为分隔符，可用@，#等替代 |
| :n1,n2s/A/B/gc | 用 B 替换 A，斜线为分隔符，可用@，#等替代 |

<b>编辑模式</b>

| 命令 | 说明                           |
| ---- | ------------------------------ |
| i    | 光标位置开始编辑，I 相反       |
| a    | 光标下一位置开始编辑，A 相反   |
| o    | 下一行开始新的一行编辑，O 相反 |

<b>命令行模式</b>

| 命令             | 说明                                     |
| ---------------- | ---------------------------------------- |
| wq               | 保存并退出                               |
| q!               | 退出不保存                               |
| n1,n2 w filename | 从 n1 到 n2 保存成 filename              |
| n1,n2 co n3      | 从 n1 到 n2 复制到 n3 下                 |
| n1,n2 m n3       | 从 n1 到 n2 剪切到 n3 下                 |
| :!command        | 展示离开 vim 执行 command 命令           |
| :set nu          | 显示行号                                 |
| :set nonu        | 不显示行号                               |
| :vs filename     | 垂直分屏展示当前文件内容和 filename 文件 |
| :sp filename     | 水平分屏展示当前文件内容和 filename 文件 |
| I+#+Ecs          | 批量注释。ctrl+v，一次性选择多行                                 |
