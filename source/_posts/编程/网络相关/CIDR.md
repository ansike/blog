---
title: CIDR
categories: 编程
tags:
  - 网络
date: 2022-08-08 23:37:26
---

### CIDR（Classless Inter-Doamin Routing ） 是什么？

中文叫无类域间路由，是一种新的 IP 寻址方案，改进了 IP 地址的分配。它取代了 A，B，C 类旧系统，极大的延长了 IPV4 的使用寿命，减缓了路由表的增长速度。

### 基于分类的 IP 地址问题

旧的寻址方法效率低下，消耗 IPV4 的速度更快，原有的类路由系统包括

| 分类 | IP 段                     | 主机数 |
| ---- | ------------------------- | ------ |
| A    | 1.0.0.0-127.255.255.255   | 2^24-2 |
| B    | 128.0.0.0-192.255.255.255 | 2^16-2 |
| C    | 192.0.0.0-223.255.255.255 | 2^8-2  |
| D    | 224.0.0.0-239.255.255.255 | 0      |

在旧的寻址模式下当需要超过 254 台主机时，将不得不弃用 C 类地址选用 B 类

### CIDR 的工作原理

CIDR 基于变长子网掩码（VLSM）。它可以定义任意长度的前缀。
CIDR 的 IP 地址分为两部分：

1. 前缀：192.168.0.0 表示当前网络的地址
2. 后缀：24 表示当前网络地址占用的位数（从左往右）

eg: 192.168.0.0/24
表示该网络的网络号是前 24 位 192.168.0，主机部分是后 8 位总共有 2^8-2（1-254）个主机位

将多个网路合并到一个路由（路由聚合）

1. 将多个 IP 地址聚合到一个之后，减小骨干路由的表项压力
2. 减少 IP 地址的使用，缓解 IP 地址耗尽

**例子**
有三个 IP 地址通过路由器进行转发
192.168.31.192/26
192.168.31.160/27
192.168.31.128/27
根据 CIDR 的模式可以寻找一个能涵盖所有 IP 地址的聚合地址进行转发：192.168.31.128/25
计算方法：查看三个 IP 地址他们从左往右完全相同位数有 25 位，我们保留相同的部分，把不同的位置位 0，就是我们需要的 IP 地址
