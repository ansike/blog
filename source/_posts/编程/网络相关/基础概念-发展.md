---
title: 基础知识-发展
categories: 编程
tags:
  - 网络
date: 2022-08-08 22:50:41
---

### 什么是计算机网络

像蜘蛛网一样多个节点通过线连接成的网状结构就是网络，而计算机网络就是多个网络设备（电脑，手机，路由器等）通过媒介（网线，wifi 等）连接到一起的网状结构就是一个计算机网络。

### 计算机网络的发展

1. 刚开始只是几个计算机直接直接连接，发送 01 信号即可完成计算机之前的通信
2. 随着计算机的变多，计算机两两之间都通过直接连接会导致整个网络非常复杂，也不便于网络的扩展
   为了解决这个问题，提出了两个比较好的设想
   1. 转发：在多个计算机之间提出一个中心节点，计算机之间的访问都通过中心节点进行转发
      1. Hub（集线器）会将收到的消息进行网络内广播【物理层】
         为了结局网络内的两台设备同时发送消息时会造成消息混杂，通过 CSMA/CD 协议进行解决（载波侦听没有其他消息时再进行发送）
         缺点：
         1. 数据广播会导致带宽利用率低
         2. 链路上同时只能有一个设备进行发送数据
      2. Switch（交换机）【数据链路层】
         1. 优点
            1. 可以记录 mac 地址和端口的映射关系，数据交换不再需要广播
            2. 全双工通信
         2. 缺点
            1. 单台交换机映射关系的量只能存储几千，查找 mac 地址的过程是广播的过程会导致**消息洪泛**
      3. Router（路由器）
   2. 标识：
      1. mac 地址 标识设备
      2. IP 地址 标识网络
3.

### hub 工作原理

hub 在收到一个数据包之后会在整个网络内进行广播，是物理层网络中心化组件，直接传输电信号。

### switch 工作原理

hub 在作为共享式的网络，一个时间只允许一个 session 传输数据，极易造成数据冲突。为了解决这种消息冲突的问题，设计了 switch 组件，基于数据链路层，在 switch 收到请求之后根据 mac-port 映射表，将数据转发到对应的主机上

交换机在内部会维护一张 mac 地址和端口的表，当网络中某一主机向另外一台主机发送数据时，会先查询交换机的映射表，如果能直接从表中查到 mac 地址（在数据帧的头部可以获取到源 MAC 地址和目的 MAC 地址）对应的端口，交换机会直接把数据包发送到对应的端口上。如果查询不到则会发送广播，目标主机做出响应之后再把 mac 地址和端口的映射关系记录在自己的映射表中。当然理解源目标主机和端口的映射关系在 switch 收到请求之后就可以做记录。

switch 替换掉 hub 的原因是 switch 支持全双工通信
作用在数据链路层中心化组件，这种就是一般说的两层交换机

### 路由器的工作原理

switch 中记录的数据是有上限的，跨网络时会有会导致频繁的广播，容易造成消息洪泛。为了解决这个问题，设计了路由器和 IP 网络，路由器作用在 IP 层，借助网络号和 IP 地址实现跨网络和主机通信

每个网络都有一个唯一的网络号，一个网络内的每台主机也都有一个唯一标识 IP 地址，
每台机器都有一个路由表

- 同一网段内两台主机进行通信
  路由器收到请求后会在当前网络内发送 ARP 请求，查找当前 IP 对应的 MAC 地址，源主机此时就可以拿到目标 MAC 地址直接进行数据交换
- 不同网段内两台主机进行通信
  路由器收到请求后判断和当前网卡属于不同的网段，需要查找路由表上符合这个网段请求转发地址，通过另外一个网卡转发到对应的网络上，在对应网络上可以找到目标主机，多个节点之间通信通过 ARP 协议进行完成。
